#!/bin/sh

git_root=`git rev-parse --show-toplevel`
failures=0
RC=0

${git_root}/.git/hooks/commit_hooks/puppet_erb_syntax_checks.sh
RC=$?
if [ "$RC" -ne 0 ]; then
    failures=`expr $failures + 1`
fi
${git_root}/.git/hooks/commit_hooks/puppet_lint_checks.sh
RC=$?
if [ "$RC" -ne 0 ]; then
    failures=`expr $failures + 1`
fi
${git_root}/.git/hooks/commit_hooks/rspec_puppet_checks.sh
RC=$?
if [ "$RC" -ne 0 ]; then
    failures=`expr $failures + 1`
fi

if [ "$failures" -ne 0 ]; then
    exit 1
fi

exit 0
